# AmWine Recommendations API

REST API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –≤–∏–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–≤–∏–∑–∞.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ backend:

```bash
pip install -r requirements.txt
```

## –ó–∞–ø—É—Å–∫

–ò–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `backend/api`:

```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

–ò–ª–∏ –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `backend`:

```bash
uvicorn api.main:app --reload --host 0.0.0.0 --port 8000
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000`

## Endpoints

### POST /offers/recommend

–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–≤–∏–∑–∞.

**Request Body:**

```json
{
  "occasion": "üéâ –í–µ—á–µ—Ä–∏–Ω–∫–∞",
  "style": "üå§ –õ–µ–≥–∫–æ –∏ –º—è–≥–∫–æ",
  "drink_types": [
    "üç∑ –í–∏–Ω–æ / –∏–≥—Ä–∏—Å—Ç–æ–µ",
    "üç∫ –ü–∏–≤–æ / —Å–∏–¥—Ä"
  ],
  "tastes": [
    "üçë –§—Ä—É–∫—Ç–æ–≤–æ–µ / –∞—Ä–æ–º–∞—Ç–Ω–æ–µ",
    "üç¨ –°–ª–∞–¥–∫–æ–≤–∞—Ç–æ–µ"
  ],
  "people_count": 6,
  "budget": "üí∞ 1000‚Äì3000 ‚ÇΩ"
}
```

**Response:**

```json
{
  "offers": [
    {
      "id": "121633",
      "description": "Riga Black Balsam 0.5–ª",
      "image": "https://...",
      "url": "https://...",
      "price_raw": "999 ‚ÇΩ"
    }
  ]
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| occasion | string | –ü–æ–≤–æ–¥ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ |
| style | string | –°—Ç–∏–ª—å –Ω–∞–ø–∏—Ç–∫–∞ |
| drink_types | array[string] | –¢–∏–ø—ã –∞–ª–∫–æ–≥–æ–ª—è (multi-select) |
| tastes | array[string] | –í–∫—É—Å–æ–≤—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è (multi-select) |
| people_count | integer | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª—é–¥–µ–π (1-10) |
| budget | string | –ë—é–¥–∂–µ—Ç |

**–û—Ç–≤–µ—Ç:**

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ `offers` —Å 10 —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏.

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –±–∞–∑—ã. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ ML –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–∑–∂–µ.

### GET /

Health check endpoint.

**Response:**

```json
{
  "status": "ok",
  "service": "AmWine Recommendations API",
  "version": "1.0.0"
}
```

### GET /health

Health check –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

**Response:**

```json
{
  "status": "healthy",
  "service": "AmWine Recommendations API",
  "version": "1.0.0"
}
```

## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ API –¥–æ—Å—Ç—É–ø–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ —Å curl:

```bash
curl -X POST "http://localhost:8000/offers/recommend" \
  -H "Content-Type: application/json" \
  -d '{
    "occasion": "üéâ –í–µ—á–µ—Ä–∏–Ω–∫–∞",
    "style": "üå§ –õ–µ–≥–∫–æ –∏ –º—è–≥–∫–æ",
    "drink_types": ["üç∑ –í–∏–Ω–æ / –∏–≥—Ä–∏—Å—Ç–æ–µ"],
    "tastes": ["üçë –§—Ä—É–∫—Ç–æ–≤–æ–µ / –∞—Ä–æ–º–∞—Ç–Ω–æ–µ"],
    "people_count": 6,
    "budget": "üí∞ 1000‚Äì3000 ‚ÇΩ"
  }'
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
api/
‚îú‚îÄ‚îÄ __init__.py      # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞
‚îú‚îÄ‚îÄ main.py          # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ endpoints
‚îú‚îÄ‚îÄ models.py        # Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ database.py      # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îú‚îÄ‚îÄ config.py        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README.md        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —á—Ç–æ –∏ —Å–∫—Ä–∏–ø—Ç—ã –ë–î:

```bash
DB_NAME=amwine_products
DB_USER=postgres
DB_HOST=localhost
DB_PORT=5432
DB_PASSWORD=postgres
```

## TODO

- [ ] –î–æ–±–∞–≤–∏—Ç—å ML-–º–æ–¥–µ–ª—å –¥–ª—è —É–º–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å rate limiting
- [ ] –î–æ–±–∞–≤–∏—Ç—å authentication (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
