# AmWine Sommelier AI - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–±–æ—Ä–∞ –≤–∏–Ω–∞ –∏ –∞–ª–∫–æ–≥–æ–ª—å–Ω—ã—Ö –Ω–∞–ø–∏—Ç–∫–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–≤–∏–∑–∞. –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç rule-based –ø–æ–¥—Ö–æ–¥ (–±–µ–∑ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è) –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.

## –û –ø—Ä–æ–µ–∫—Ç–µ

AmWine Sommelier AI –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–æ–¥–æ–±—Ä–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏ –¥–ª—è –ª—é–±–æ–≥–æ —Å–æ–±—ã—Ç–∏—è, —É—á–∏—Ç—ã–≤–∞—è:
- –ü–æ–≤–æ–¥ (–≤–µ—á–µ—Ä–∏–Ω–∫–∞, —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π —É–∂–∏–Ω, –ø–æ–¥–∞—Ä–æ–∫ –∏ —Ç.–¥.)
- –ù–∞—Å—Ç—Ä–æ–π –≤–µ—á–µ—Ä–∞ (–ª–µ–≥–∫–∏–π, —É–º–µ—Ä–µ–Ω–Ω—ã–π, –∞–∫—Ç–∏–≤–Ω—ã–π)
- –¢–∏–ø –Ω–∞–ø–∏—Ç–∫–∞ (–≤–∏–Ω–æ, –∏–≥—Ä–∏—Å—Ç–æ–µ, –∫—Ä–µ–ø–∫–∏–µ –Ω–∞–ø–∏—Ç–∫–∏)
- –ë—é–¥–∂–µ—Ç (–æ—Ç —ç–∫–æ–Ω–æ–º –¥–æ –ø—Ä–µ–º–∏—É–º)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Å—Ç–µ–π

–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∞–≤–∏–ª (rule-based system), –∏—Å–ø–æ–ª—å–∑—É—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ —Ä–∞—Å—á–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ö–≤–∏–∑-—Å–∏—Å—Ç–µ–º–∞**: –ø—Ä–æ—Å—Ç–æ–π –æ–ø—Ä–æ—Å–Ω–∏–∫ –∏–∑ 5 –≤–æ–ø—Ä–æ—Å–æ–≤
- **–£–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**: –ø–æ —Ü–µ–Ω–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∫—Ä–µ–ø–æ—Å—Ç–∏ (ABV)
- **–†–∞—Å—á–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏**: –æ—Ü–µ–Ω–∫–∞ –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
- **–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ**: —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Ç —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ —Å—Ç—Ä–∞–Ω
- **REST API**: FastAPI backend —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π Swagger
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–≤–∏–∑–æ–º
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL**: –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: Python 3.7+, FastAPI
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL 12+
- **ORM**: psycopg2 (–ø—Ä—è–º—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã)
- **API Documentation**: Swagger UI, ReDoc
- **Deployment**: Uvicorn ASGI server

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ README.md                           # –ì–ª–∞–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ backend/                           # Backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    ‚îú‚îÄ‚îÄ api/                           # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    ‚îÇ   ‚îú‚îÄ‚îÄ main.py                   # Endpoints –∏ —Ä–æ—É—Ç—ã
    ‚îÇ   ‚îú‚îÄ‚îÄ models.py                 # Pydantic –º–æ–¥–µ–ª–∏
    ‚îÇ   ‚îú‚îÄ‚îÄ recommender.py            # –õ–æ–≥–∏–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    ‚îÇ   ‚îú‚îÄ‚îÄ templates/                # HTML —à–∞–±–ª–æ–Ω—ã
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.html           # –ö–≤–∏–∑ —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    ‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt          # API –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    ‚îÇ   ‚îî‚îÄ‚îÄ README.md                # API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ migrations/                    # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
    ‚îÇ   ‚îú‚îÄ‚îÄ 001_add_session_tables.sql
    ‚îÇ   ‚îî‚îÄ‚îÄ 002_schema_updates.sql
    ‚îú‚îÄ‚îÄ schema.sql                     # –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î
    ‚îú‚îÄ‚îÄ db_config.py                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
    ‚îú‚îÄ‚îÄ create_database.py            # –°–æ–∑–¥–∞–Ω–∏–µ –ë–î –∏ —Ç–∞–±–ª–∏—Ü
    ‚îú‚îÄ‚îÄ load_data.py                  # –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON
    ‚îú‚îÄ‚îÄ update_products.py            # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    ‚îú‚îÄ‚îÄ optimize_db.py                # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤
    ‚îú‚îÄ‚îÄ check_database.py             # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    ‚îú‚îÄ‚îÄ test_recommendations.py       # –¢–µ—Å—Ç—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
    ‚îú‚îÄ‚îÄ setup_all.py                  # –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
    ‚îú‚îÄ‚îÄ requirements.txt              # Backend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    ‚îú‚îÄ‚îÄ .env.example                  # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    ‚îî‚îÄ‚îÄ README.md                     # Backend –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.7+
- PostgreSQL 12+
- pip (package installer)

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/sommelierai1488-code/sommelier-ai.git
cd sommelier-ai
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL

**Ubuntu/Debian:**
```bash
sudo apt-get update
sudo apt-get install postgresql postgresql-contrib
sudo systemctl start postgresql
```

**macOS (Homebrew):**
```bash
brew install postgresql
brew services start postgresql
```

**Windows:**
–°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞](https://www.postgresql.org/download/windows/)

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cd backend

# –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `backend/`:

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:
```env
DB_NAME=amwine_products
DB_USER=postgres
DB_PASSWORD=your_password_here
DB_HOST=localhost
DB_PORT=5432
```

### 5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞—Ç—å –ë–î –∏ —Ç–∞–±–ª–∏—Ü—ã
python create_database.py

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (–µ—Å–ª–∏ –µ—Å—Ç—å JSON —Ñ–∞–π–ª)
python load_data.py /path/to/products.json
```

### 6. –ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞

```bash
cd api
python main.py

# –ò–ª–∏ —Å uvicorn
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: **http://localhost:8000**

- –ö–≤–∏–∑ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: http://localhost:8000
- Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc
- Health check: http://localhost:8000/health

## API Endpoints

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ [API_DOCUMENTATION.md](API_DOCUMENTATION.md)

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints:

#### Session Management
- `POST /sessions/start` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é
- `POST /sessions/{session_id}/quiz` - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—ã –∫–≤–∏–∑–∞ (UPSERT)
- `POST /sessions/{session_id}/complete` - –ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ—Å—Å–∏—é

#### Recommendations
- `POST /offers/recommend` - –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤

#### Events Tracking
- `POST /session/events` - –ó–∞–ø–∏—Å–∞—Ç—å —Å–æ–±—ã—Ç–∏—è (–ª–∞–π–∫–∏/–¥–∏–∑–ª–∞–π–∫–∏) –±–∞—Ç—á–µ–º

#### Cart Management
- `POST /sessions/{session_id}/cart` - –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
- `GET /sessions/{session_id}/cart` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
- `DELETE /sessions/{session_id}/cart/{sku}` - –£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã

#### Health Check
- `GET /` - Health check
- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ API

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **Swagger UI:** http://localhost:8000/docs
- **ReDoc:** http://localhost:8000/redoc

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–≤–∏–∑–∞

–ö–≤–∏–∑ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç emoji-–∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

### occasion (–ü–æ–≤–æ–¥)
- üéâ –í–µ—á–µ—Ä–∏–Ω–∫–∞
- üíë –†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –≤–µ—á–µ—Ä
- üéä –ü—Ä–∞–∑–¥–Ω–∏–∫
- üè° –û–±—ã—á–Ω—ã–π –≤–µ—á–µ—Ä
- üéÅ –ü–æ–¥–∞—Ä–æ–∫
- üíº –î–µ–ª–æ–≤–∞—è –≤—Å—Ç—Ä–µ—á–∞

### style (–°—Ç–∏–ª—å –Ω–∞–ø–∏—Ç–∫–∞)
- üå§ –õ–µ–≥–∫–æ –∏ –º—è–≥–∫–æ
- ‚ö° –£–º–µ—Ä–µ–Ω–Ω–æ
- üî• –ê–∫—Ç–∏–≤–Ω–æ

### drink_types (–¢–∏–ø—ã –Ω–∞–ø–∏—Ç–∫–æ–≤) - multi-select –º–∞—Å—Å–∏–≤
- üç∑ –í–∏–Ω–æ / –∏–≥—Ä–∏—Å—Ç–æ–µ
- üç∫ –ü–∏–≤–æ / —Å–∏–¥—Ä
- ü•É –ö—Ä–µ–ø–∫–∏–µ –Ω–∞–ø–∏—Ç–∫–∏

### tastes (–í–∫—É—Å–æ–≤—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è) - multi-select –º–∞—Å—Å–∏–≤
- üçë –§—Ä—É–∫—Ç–æ–≤–æ–µ / –∞—Ä–æ–º–∞—Ç–Ω–æ–µ
- üç¨ –°–ª–∞–¥–∫–æ–≤–∞—Ç–æ–µ
- üåø –¢—Ä–∞–≤—è–Ω–æ–µ / –≥–æ—Ä—å–∫–æ–≤–∞—Ç–æ–µ
- üå∂ –ü—Ä—è–Ω–æ–µ

### people_count
–¶–µ–ª–æ–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 10

### budget (–ë—é–¥–∂–µ—Ç)
- üíµ –î–æ 1000 ‚ÇΩ
- üí∞ 1000‚Äì3000 ‚ÇΩ
- üíé 3000‚Äì7000 ‚ÇΩ
- üëë –û—Ç 7000 ‚ÇΩ

## –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–π –ø–æ–¥—Ö–æ–¥:

### 1. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –±—é–¥–∂–µ—Ç—É
–¢–æ–≤–∞—Ä—ã –æ—Ç–±–∏—Ä–∞—é—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ü–µ–Ω–æ–≤–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

### 2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
–ù–∞ –æ—Å–Ω–æ–≤–µ —Ç–∏–ø–∞ –Ω–∞–ø–∏—Ç–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –∏—â–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### 3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫—Ä–µ–ø–æ—Å—Ç–∏ (ABV)
–í—ã–±–æ—Ä –Ω–∞–ø–∏—Ç–∫–æ–≤ —Å –ø–æ–¥—Ö–æ–¥—è—â–µ–π –∫—Ä–µ–ø–æ—Å—Ç—å—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞—Å—Ç—Ä–æ—è –≤–µ—á–µ—Ä–∞

### 4. –†–∞—Å—á–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
–ö–∞–∂–¥–æ–º—É —Ç–æ–≤–∞—Ä—É –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –æ—Ü–µ–Ω–∫–∞ (0-1) –Ω–∞ –æ—Å–Ω–æ–≤–µ:
- **–¶–µ–Ω–∞ (30%)**: –±–ª–∏–∑–æ—Å—Ç—å –∫ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω–µ –≤ –±—é–¥–∂–µ—Ç–µ
- **–ö—Ä–µ–ø–æ—Å—Ç—å (20%)**: —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Å—Ç–∏–ª—é
- **–ö–∞—Ç–µ–≥–æ—Ä–∏—è (30%)**: —Ç–æ—á–Ω–æ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- **–†–µ–π—Ç–∏–Ω–≥ (10%)**: –æ—Ü–µ–Ω–∫–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π
- **–ù–∞–ª–∏—á–∏–µ (10%)**: –≤ –Ω–∞–ª–∏—á–∏–∏/–ø–æ–¥ –∑–∞–∫–∞–∑

### 5. –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
–§–∏–Ω–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º:
- –†–∞–∑–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π
- –†–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è
- –†–∞–∑–Ω—ã—Ö —Ü–µ–Ω–æ–≤—ã—Ö —Ç–æ—á–µ–∫ –≤–Ω—É—Ç—Ä–∏ –±—é–¥–∂–µ—Ç–∞

## –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏

### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON

```bash
python load_data.py /path/to/products.json
```

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON:
```json
{
  "sku": "string",
  "name": "string",
  "price_current": number,
  "country": "string",
  "producer": "string",
  "category_path": "string",
  "abv_percent": number,
  "volume_l": number,
  "rating_value": number,
  "rating_count": number,
  ...
}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

```bash
python update_products.py /path/to/updated_products.json
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ë–î

```bash
python optimize_db.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
python check_database.py
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

```bash
python test_recommendations.py
```

### –¢–µ—Å—Ç API

```bash
cd api
python test_api.py
```

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏:**
```bash
curl -X POST "http://localhost:8000/sessions/start" \
  -H "Content-Type: application/json" \
  -d '{"user_id": null}'
```

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–≤–∏–∑–∞:**
```bash
curl -X POST "http://localhost:8000/sessions/1/quiz" \
  -H "Content-Type: application/json" \
  -d '{
    "occasion": "üéâ –í–µ—á–µ—Ä–∏–Ω–∫–∞",
    "style": "üå§ –õ–µ–≥–∫–æ –∏ –º—è–≥–∫–æ",
    "drink_types": ["üç∑ –í–∏–Ω–æ / –∏–≥—Ä–∏—Å—Ç–æ–µ"],
    "tastes": ["üçë –§—Ä—É–∫—Ç–æ–≤–æ–µ / –∞—Ä–æ–º–∞—Ç–Ω–æ–µ"],
    "people_count": 6,
    "budget": "üí∞ 1000‚Äì3000 ‚ÇΩ"
  }'
```

**–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:**
```bash
curl -X POST "http://localhost:8000/offers/recommend" \
  -H "Content-Type: application/json" \
  -d '{
    "occasion": "üéâ –í–µ—á–µ—Ä–∏–Ω–∫–∞",
    "style": "üå§ –õ–µ–≥–∫–æ –∏ –º—è–≥–∫–æ",
    "drink_types": ["üç∑ –í–∏–Ω–æ / –∏–≥—Ä–∏—Å—Ç–æ–µ"],
    "tastes": ["üçë –§—Ä—É–∫—Ç–æ–≤–æ–µ / –∞—Ä–æ–º–∞—Ç–Ω–æ–µ"],
    "people_count": 6,
    "budget": "üí∞ 1000‚Äì3000 ‚ÇΩ"
  }'
```

**Python –ø—Ä–∏–º–µ—Ä:**
```python
import requests

# 1. –°–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é
session_response = requests.post(
    "http://localhost:8000/sessions/start",
    json={"user_id": None}
)
session_id = session_response.json()["session_id"]

# 2. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–≤–∏–∑
quiz_data = {
    "occasion": "üéâ –í–µ—á–µ—Ä–∏–Ω–∫–∞",
    "style": "üå§ –õ–µ–≥–∫–æ –∏ –º—è–≥–∫–æ",
    "drink_types": ["üç∑ –í–∏–Ω–æ / –∏–≥—Ä–∏—Å—Ç–æ–µ"],
    "tastes": ["üçë –§—Ä—É–∫—Ç–æ–≤–æ–µ / –∞—Ä–æ–º–∞—Ç–Ω–æ–µ"],
    "people_count": 6,
    "budget": "üí∞ 1000‚Äì3000 ‚ÇΩ"
}

requests.post(
    f"http://localhost:8000/sessions/{session_id}/quiz",
    json=quiz_data
)

# 3. –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
recommendations = requests.post(
    "http://localhost:8000/offers/recommend",
    json=quiz_data
)

print(recommendations.json()["offers"])
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã

#### 1. products - –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
–û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –∞–ª–∫–æ–≥–æ–ª—å–Ω—ã–º–∏ –Ω–∞–ø–∏—Ç–∫–∞–º–∏

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| sku | VARCHAR | Primary key, –∞—Ä—Ç–∏–∫—É–ª |
| name | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ |
| price_current | DECIMAL | –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ |
| country | VARCHAR | –°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ |
| producer | VARCHAR | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å |
| category_path | TEXT | –ü—É—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ |
| volume_l | DECIMAL | –û–±—ä–µ–º –≤ –ª–∏—Ç—Ä–∞—Ö |
| abv_percent | DECIMAL | –ö—Ä–µ–ø–æ—Å—Ç—å –≤ % |
| rating_value | DECIMAL | –†–µ–π—Ç–∏–Ω–≥ (0-5) |
| rating_count | INTEGER | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ü–µ–Ω–æ–∫ |
| availability_status | VARCHAR | –°—Ç–∞—Ç—É—Å –Ω–∞–ª–∏—á–∏—è |
| image_urls | JSONB | –ú–∞—Å—Å–∏–≤ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π |
| attrs_json | JSONB | –ê—Ç—Ä–∏–±—É—Ç—ã –ø—Ä–æ–¥—É–∫—Ç–∞ |
| texts_json | JSONB | –¢–µ–∫—Å—Ç–æ–≤—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è |

#### 2. sessions - –°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| session_id | SERIAL | Primary key |
| user_id | INTEGER | FK –∫ users (nullable) |
| status | VARCHAR | in_progress / completed / abandoned |
| created_at | TIMESTAMP | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| updated_at | TIMESTAMP | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

#### 3. session_quiz - –û—Ç–≤–µ—Ç—ã –∫–≤–∏–∑–∞
–û—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫–≤–∏–∑–∞ (1:1 —Å sessions)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| session_id | INTEGER | Primary key, FK –∫ sessions |
| occasion | VARCHAR | –ü–æ–≤–æ–¥ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ |
| style | VARCHAR | –°—Ç–∏–ª—å –Ω–∞–ø–∏—Ç–∫–∞ |
| drink_types | JSONB | –ú–∞—Å—Å–∏–≤ —Ç–∏–ø–æ–≤ –Ω–∞–ø–∏—Ç–∫–æ–≤ |
| tastes | JSONB | –ú–∞—Å—Å–∏–≤ –≤–∫—É—Å–æ–≤—ã—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π |
| people_count | INTEGER | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª—é–¥–µ–π |
| budget_bucket | VARCHAR | –ë—é–¥–∂–µ—Ç |

#### 4. session_events - –°–æ–±—ã—Ç–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
–†–µ–∫–∞ —Å–æ–±—ã—Ç–∏–π - –≤—Å–µ –ª–∞–π–∫–∏/–¥–∏–∑–ª–∞–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| action_id | SERIAL | Primary key |
| session_id | INTEGER | FK –∫ sessions |
| sku | VARCHAR | FK –∫ products |
| action | VARCHAR | like / dislike / none |
| created_at | TIMESTAMP | –í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è |

#### 5. session_cart - –ö–æ—Ä–∑–∏–Ω–∞
–§–∏–Ω–∞–ª—å–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| cart_id | SERIAL | Primary key |
| session_id | INTEGER | FK –∫ sessions |
| sku | VARCHAR | FK –∫ products |
| qty | INTEGER | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ |
| price_at_add | DECIMAL | –¶–µ–Ω–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è |
| added_at | TIMESTAMP | –í—Ä–µ–º—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è |

#### 6. users - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã (–∞–Ω–æ–Ω–∏–º–Ω—ã–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| user_id | SERIAL | Primary key |
| created_at | TIMESTAMP | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |

### –ò–Ω–¥–µ–∫—Å—ã

–î–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –Ω–∞:
- `category_path` (GIN –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞)
- `price_current`
- `country`
- `producer`
- `abv_percent`
- `rating_value`

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker (–±—É–¥—É—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)

```dockerfile
# –ü—Ä–∏–º–µ—Ä Dockerfile
FROM python:3.9-slim

WORKDIR /app

COPY backend/requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY backend/ .

CMD ["uvicorn", "api.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

### Systemd Service

–ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ `sommelier-api.service`:
```ini
[Unit]
Description=AmWine Sommelier API
After=network.target postgresql.service

[Service]
Type=simple
User=www-data
WorkingDirectory=/opt/sommelier-ai/backend/api
Environment="PATH=/opt/sommelier-ai/backend/venv/bin"
ExecStart=/opt/sommelier-ai/backend/venv/bin/uvicorn main:app --host 0.0.0.0 --port 8000
Restart=always

[Install]
WantedBy=multi-user.target
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –ó–∞–ø—É—â–µ–Ω –ª–∏ PostgreSQL: `sudo systemctl status postgresql`
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª–∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `.env`
- –î–æ—Å—Ç—É–ø–µ–Ω –ª–∏ PostgreSQL –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—Ç—É

### –û—à–∏–±–∫–∞ "database already exists"

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–µ—Ä–µ–π–¥–µ—Ç –∫ —Ç–∞–±–ª–∏—Ü–∞–º

### –ü—É—Å—Ç—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:
- –í –ë–î –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ: `python check_database.py`
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–≤–∏–∑–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∏–º–µ—é—â–∏–º—Å—è —Ç–æ–≤–∞—Ä–∞–º
- –ë—é–¥–∂–µ—Ç –Ω–µ —Å–ª–∏—à–∫–æ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω

## –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] Frontend React/Vue –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Redis
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤
- [ ] –ò—Å—Ç–æ—Ä–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
- [ ] –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –æ–ø–ª–∞—Ç—ã
- [ ] Mobile –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] –£—á–µ—Ç —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤
- [ ] –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–æ—Ç–∑—ã–≤—ã, —Ä–µ–π—Ç–∏–Ω–≥–∏)

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤:
- `backend/README.md` - Backend –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `backend/api/README.md` - API endpoints
- `backend/HOW_TO_UPDATE_DB.md` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î
- `backend/MIGRATION_GUIDE.md` - –ú–∏–≥—Ä–∞—Ü–∏–∏
- `backend/START_API.md` - –ó–∞–ø—É—Å–∫ API

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π.

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ [issues](https://github.com/sommelierai1488-code/sommelier-ai/issues) –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –∫–∞–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è rule-based —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–ª—è e-commerce –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∞–ª–∫–æ–≥–æ–ª—å–Ω—ã—Ö –Ω–∞–ø–∏—Ç–∫–æ–≤.
